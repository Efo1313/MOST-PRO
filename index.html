<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOST PRO FINAL</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        body { background: #050505; color: #fff; font-family: sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; }
        .v-box { width: 100%; max-width: 800px; aspect-ratio: 16/9; background: #000; margin-top: 10px; }
        video { width: 100%; height: 100%; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; width: 100%; max-width: 800px; padding: 20px; box-sizing: border-box; }
        .btn { background: #111; border: 1px solid #ff007a; color: #fff; padding: 20px 10px; border-radius: 12px; font-weight: bold; cursor: pointer; text-transform: uppercase; font-size: 11px; }
        .active { background: #ff007a; border-color: #fff; }
    </style>
</head>
<body>
    <div class="v-box"><video id="video" controls playsinline autoplay crossorigin="anonymous"></video></div>
    <div id="status" style="margin-top:10px; font-size:12px; color:#ff007a;">ðŸ“¡ SÄ°STEM HAZIR</div>
    <div class="grid" id="btns"></div>

    <script>
        const video = document.getElementById('video');
        const st = document.getElementById('status');
        
        // Buraya kendi worker adresini yazmalÄ±sÄ±n
        const workerBase = "https://most21-pro21.efomost2.workers.dev";

        const kanallar = [
            { n: "BNT 1 HD", id: "hd-bnt-1-hd-online" },
            { n: "Star Crime HD", id: "hd-star-crime-hd-online" }
        ];

        let hls = null;

        function play(id, btn, name) {
            const url = `${workerBase}/playlist/${id}.m3u8`;
            document.querySelectorAll('.btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            st.innerText = "â³ BAÄžLANILIYOR: " + name;

            if (Hls.isSupported()) {
                if (hls) hls.destroy();
                hls = new Hls({ 
                    xhrSetup: xhr => { xhr.withCredentials = false; },
                    manifestLoadingMaxRetry: 10
                });
                hls.loadSource(url);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, () => { video.play(); st.innerText = "âœ… CANLI YAYIN"; });
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = url;
                video.play();
                st.innerText = "âœ… CANLI (NATIVE)";
            }
        }

        window.onload = () => {
            const container = document.getElementById('btns');
            kanallar.forEach(c => {
                const b = document.createElement('button');
                b.className = 'btn';
                b.innerText = c.n;
                b.onclick = () => play(c.id, b, c.n);
                container.appendChild(b);
            });
        };
    </script>
</body>
</html>
